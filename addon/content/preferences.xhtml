<linkset>
  <html:link rel="localization" href="__addonRef__-preferences.ftl" />
</linkset>
<groupbox
  onload="Zotero.__addonInstance__.hooks.onPrefsEvent('load', { window });"
>
  <label><html:h2 data-l10n-id="pref-title"></html:h2></label>
  <separator />
  <label><html:h3 data-l10n-id="pref-ai-title"></html:h3></label>

  <!-- Provider selection -->
  <hbox>
    <html:label
      for="zotero-prefpane-__addonRef__-provider"
      data-l10n-id="pref-provider"
    ></html:label>
    <html:select
      id="zotero-prefpane-__addonRef__-provider"
      preference="provider"
    >
      <html:option
        value="openai-compatible"
        data-l10n-id="pref-provider-openai"
      ></html:option>
      <html:option
        value="gemini-v1beta"
        data-l10n-id="pref-provider-gemini"
      ></html:option>
    </html:select>
  </hbox>

  <!-- OpenAI-compatible base URL -->
  <hbox>
    <html:label
      for="zotero-prefpane-__addonRef__-openaiApiBase"
      data-l10n-id="pref-api-base"
    ></html:label>
    <html:input
      type="text"
      id="zotero-prefpane-__addonRef__-openaiApiBase"
      preference="openaiApiBase"
      style="width: 420px"
    ></html:input>
  </hbox>

  <!-- Gemini v1beta base URL -->
  <hbox>
    <html:label
      for="zotero-prefpane-__addonRef__-geminiApiBase"
      data-l10n-id="pref-gemini-api-base"
    ></html:label>
    <html:input
      type="text"
      id="zotero-prefpane-__addonRef__-geminiApiBase"
      preference="geminiApiBase"
      style="width: 420px"
    ></html:input>
  </hbox>

  <hbox>
    <html:label
      for="zotero-prefpane-__addonRef__-apiKey"
      data-l10n-id="pref-api-key"
    ></html:label>
    <html:input
      type="password"
      id="zotero-prefpane-__addonRef__-apiKey"
      preference="apiKey"
      style="width: 420px"
    ></html:input>
  </hbox>
  <hbox>
    <html:label
      for="zotero-prefpane-__addonRef__-model"
      data-l10n-id="pref-model"
    ></html:label>
    <html:input
      type="text"
      id="zotero-prefpane-__addonRef__-model"
      preference="model"
    ></html:input>
    <html:label
      for="zotero-prefpane-__addonRef__-temperature"
      data-l10n-id="pref-temperature"
      style="margin-left: 10px"
    ></html:label>
    <html:input
      type="number"
      step="0.1"
      min="0"
      max="2"
      id="zotero-prefpane-__addonRef__-temperature"
      preference="temperature"
      style="width: 80px"
    ></html:input>
  </hbox>

  <!-- Thinking / thoughts -->
  <hbox>
    <html:label
      for="zotero-prefpane-__addonRef__-enableThoughts"
      data-l10n-id="pref-enable-thoughts"
    ></html:label>
    <html:input
      type="checkbox"
      id="zotero-prefpane-__addonRef__-enableThoughts"
      preference="enableThoughts"
    ></html:input>
    <html:label
      for="zotero-prefpane-__addonRef__-thinkingBudget"
      data-l10n-id="pref-thinking-budget"
      style="margin-left: 10px"
    ></html:label>
    <html:input
      type="number"
      id="zotero-prefpane-__addonRef__-thinkingBudget"
      preference="thinkingBudget"
      style="width: 80px"
    ></html:input>
    <html:label
      data-l10n-id="pref-thinking-budget-help"
      style="margin-left: 10px"
    ></html:label>
  </hbox>

  <!-- Summarize mode -->
  <hbox>
    <html:label
      for="zotero-prefpane-__addonRef__-summarizeMode"
      data-l10n-id="pref-summarize-mode"
    ></html:label>
    <html:select
      id="zotero-prefpane-__addonRef__-summarizeMode"
      preference="summarizeMode"
    >
      <html:option
        value="text-index"
        data-l10n-id="pref-summarize-mode-text-index"
      ></html:option>
      <html:option
        value="pdf-native"
        data-l10n-id="pref-summarize-mode-pdf-native"
      ></html:option>
    </html:select>
  </hbox>

  <!-- Concurrency -->
  <hbox>
    <html:label
      for="zotero-prefpane-__addonRef__-concurrency"
      data-l10n-id="pref-concurrency"
    ></html:label>
    <html:input
      type="number"
      min="1"
      max="10"
      id="zotero-prefpane-__addonRef__-concurrency"
      preference="concurrency"
      style="width: 80px"
    ></html:input>
  </hbox>

  <!-- Attachment filter -->
  <hbox>
    <html:label
      for="zotero-prefpane-__addonRef__-attachmentFilterGlob"
      data-l10n-id="pref-attachment-filter"
    ></html:label>
    <html:input
      type="text"
      id="zotero-prefpane-__addonRef__-attachmentFilterGlob"
      preference="attachmentFilterGlob"
      style="width: 420px"
    ></html:input>
  </hbox>

  <!-- Save thoughts as note -->
  <hbox>
    <html:label
      for="zotero-prefpane-__addonRef__-saveThoughtsToNote"
      data-l10n-id="pref-save-thoughts-to-note"
    ></html:label>
    <html:input
      type="checkbox"
      id="zotero-prefpane-__addonRef__-saveThoughtsToNote"
      preference="saveThoughtsToNote"
    ></html:input>
  </hbox>

  <hbox>
    <html:label
      for="zotero-prefpane-__addonRef__-maxChars"
      data-l10n-id="pref-max-chars"
    ></html:label>
    <html:input
      type="number"
      min="1000"
      max="1000000"
      id="zotero-prefpane-__addonRef__-maxChars"
      preference="maxChars"
    ></html:input>
  </hbox>
  <hbox>
    <html:label
      for="zotero-prefpane-__addonRef__-prompt"
      data-l10n-id="pref-prompt"
    ></html:label>
    <html:textarea
      id="zotero-prefpane-__addonRef__-prompt"
      preference="prompt"
      rows="6"
      cols="60"
    ></html:textarea>
  </hbox>
  <hbox>
    <button
      id="zotero-prefpane-__addonRef__-apitest"
      data-l10n-id="pref-api-test"
    ></button>
  </hbox>
  <hbox class="virtualized-table-container" flex="1" height="300px">
    <html:div id="__addonRef__-table-container" />
  </hbox>
</groupbox>
<vbox>
  <html:label
    data-l10n-id="pref-help"
    data-l10n-args='{"time": "__buildTime__","name": "__addonName__","version":"__buildVersion__"}'
  ></html:label>
</vbox>
