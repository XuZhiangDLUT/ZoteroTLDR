<vbox xmlns="http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul"
      xmlns:html="http://www.w3.org/1999/xhtml"
      onload="Zotero.__addonInstance__.hooks.onPrefsEvent('load', { window });">

  <groupbox>
    <label><html:h2 data-l10n-id="pref-title">ZoteroTLDR Settings</html:h2></label>

    <hbox align="center">
      <label data-l10n-id="pref-api-base" style="width: 120px">API Base URL:</label>
      <html:input type="text" id="zotero-prefpane-__addonRef__-apiBase"
        preference="extensions.zotero.__addonRef__.apiBase" style="width: 350px"/>
    </hbox>

    <hbox align="center">
      <label data-l10n-id="pref-api-key" style="width: 120px">API Key:</label>
      <html:input type="password" id="zotero-prefpane-__addonRef__-apiKey"
        preference="extensions.zotero.__addonRef__.apiKey" style="width: 350px"/>
    </hbox>

    <hbox align="center">
      <label data-l10n-id="pref-model" style="width: 120px">Model:</label>
      <html:input type="text" id="zotero-prefpane-__addonRef__-model"
        preference="extensions.zotero.__addonRef__.model" style="width: 180px"/>
      <label data-l10n-id="pref-temperature" style="margin-left: 20px">Temperature:</label>
      <html:input type="number" step="0.1" min="0" max="2"
        id="zotero-prefpane-__addonRef__-temperature"
        preference="extensions.zotero.__addonRef__.temperature" style="width: 70px"/>
      <label data-l10n-id="pref-max-output-tokens" style="margin-left: 20px">Max Tokens:</label>
      <html:input type="number" min="1024" max="131072"
        id="zotero-prefpane-__addonRef__-maxOutputTokens"
        preference="extensions.zotero.__addonRef__.maxOutputTokens" style="width: 80px"/>
    </hbox>

    <hbox align="center">
      <label data-l10n-id="pref-pdf-parse-mode" style="width: 120px">PDF Parse Mode:</label>
      <html:select id="zotero-prefpane-__addonRef__-pdfParseMode"
        preference="extensions.zotero.__addonRef__.pdfParseMode" style="width: 180px">
        <html:option value="remote" data-l10n-id="pref-pdf-parse-mode-remote">Remote (upload PDF)</html:option>
        <html:option value="local" data-l10n-id="pref-pdf-parse-mode-local">Local (extract text)</html:option>
      </html:select>
    </hbox>

    <hbox align="center">
      <label data-l10n-id="pref-enable-thoughts" style="width: 120px">Enable Thoughts:</label>
      <checkbox id="zotero-prefpane-__addonRef__-enableThoughts"
        preference="extensions.zotero.__addonRef__.enableThoughts"/>
      <label data-l10n-id="pref-thinking-budget" style="margin-left: 20px">Thinking Budget:</label>
      <html:input type="number" id="zotero-prefpane-__addonRef__-thinkingBudget"
        preference="extensions.zotero.__addonRef__.thinkingBudget" style="width: 80px"/>
    </hbox>

    <hbox align="center">
      <label data-l10n-id="pref-concurrency" style="width: 120px">Concurrency:</label>
      <html:input type="number" min="1" max="10"
        id="zotero-prefpane-__addonRef__-concurrency"
        preference="extensions.zotero.__addonRef__.concurrency" style="width: 70px"/>
      <label data-l10n-id="pref-max-chars" style="margin-left: 20px">Max Chars:</label>
      <html:input type="number" min="10000" max="2000000"
        id="zotero-prefpane-__addonRef__-maxChars"
        preference="extensions.zotero.__addonRef__.maxChars" style="width: 100px"/>
    </hbox>

    <hbox align="center">
      <label data-l10n-id="pref-rate-limit-count" style="width: 120px">Rate Limit:</label>
      <html:input type="number" min="1" max="100"
        id="zotero-prefpane-__addonRef__-rateLimitCount"
        preference="extensions.zotero.__addonRef__.rateLimitCount" style="width: 70px"/>
      <label data-l10n-id="pref-rate-limit-per" style="margin-left: 5px">requests per</label>
      <html:input type="number" min="1" max="60"
        id="zotero-prefpane-__addonRef__-rateLimitWindowMinutes"
        preference="extensions.zotero.__addonRef__.rateLimitWindowMinutes" style="width: 70px"/>
      <label data-l10n-id="pref-rate-limit-minutes" style="margin-left: 5px">minutes</label>
    </hbox>

    <hbox align="center">
      <label data-l10n-id="pref-attachment-filter" style="width: 120px">PDF Filter:</label>
      <html:input type="text" id="zotero-prefpane-__addonRef__-attachmentFilter"
        preference="extensions.zotero.__addonRef__.attachmentFilter" style="width: 250px"/>
    </hbox>

    <hbox align="center">
      <label data-l10n-id="pref-max-file-size" style="width: 120px">Max File Size:</label>
      <html:input type="number" min="0" max="500"
        id="zotero-prefpane-__addonRef__-maxFileSizeMB"
        preference="extensions.zotero.__addonRef__.maxFileSizeMB" style="width: 70px"/>
      <label data-l10n-id="pref-max-file-size-help" style="margin-left: 5px">MB (0=no limit)</label>
      <label data-l10n-id="pref-max-pages" style="margin-left: 20px">Max Pages:</label>
      <html:input type="number" min="0" max="10000"
        id="zotero-prefpane-__addonRef__-maxPageCount"
        preference="extensions.zotero.__addonRef__.maxPageCount" style="width: 70px"/>
      <label data-l10n-id="pref-no-limit-help" style="margin-left: 5px">(0=no limit)</label>
    </hbox>

    <hbox align="center">
      <label data-l10n-id="pref-skip-existing-summary" style="width: 120px">Skip Summarized:</label>
      <checkbox id="zotero-prefpane-__addonRef__-skipExistingSummary"
        preference="extensions.zotero.__addonRef__.skipExistingSummary"/>
      <label data-l10n-id="pref-retry-on-524" style="margin-left: 20px">Retry on 524:</label>
      <html:input type="number" min="0" max="10"
        id="zotero-prefpane-__addonRef__-retryOn524"
        preference="extensions.zotero.__addonRef__.retryOn524" style="width: 60px"/>
      <label data-l10n-id="pref-times" style="margin-left: 5px">times</label>
    </hbox>

    <vbox>
      <label data-l10n-id="pref-prompt">Prompt Template:</label>
      <html:textarea id="zotero-prefpane-__addonRef__-prompt"
        preference="extensions.zotero.__addonRef__.prompt" rows="8" style="width: 100%;"/>
    </vbox>

    <hbox>
      <button id="zotero-prefpane-__addonRef__-apitest" data-l10n-id="pref-api-test" label="Test API"/>
    </hbox>
  </groupbox>

  <hbox align="center" style="margin-top: 10px; gap: 10px;">
    <label value="v__buildVersion__" style="color: #888; font-size: 11px;"/>
    <label data-l10n-id="pref-github-label" style="color: #888; font-size: 11px;">GitHub:</label>
    <html:input type="text" readonly="true" value="https://github.com/XuZhiangDLUT/ZoteroTLDR"
      style="width: 280px; font-size: 11px; color: #0066cc; border: 1px solid #ccc; padding: 2px 4px;"
      onclick="this.select();"/>
  </hbox>
</vbox>
